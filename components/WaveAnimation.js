import React, { useEffect, useRef } from "react";
import { Animated, Easing, Dimensions } from "react-native";
import Svg, { Path, Defs, LinearGradient, Stop } from "react-native-svg";

const AnimatedPath = Animated.createAnimatedComponent(Path);
const { width: screenWidth } = Dimensions.get("window");

const WaveAnimation = () => {
  const waveAnim = useRef(new Animated.Value(0)).current;

  useEffect(() => {
    Animated.loop(
      Animated.timing(waveAnim, {
        toValue: 1,
        duration: 4000,
        easing: Easing.linear,
        useNativeDriver: false,
      })
    ).start();
  }, [waveAnim]);

  const interpolatePath = (inputRange, outputRange) => {
    return waveAnim.interpolate({
      inputRange,
      outputRange,
    });
  };

  const path0 = interpolatePath(
    [0, 0.25, 0.5, 0.75, 1],
    [
      "M 0,700 L 0,131 C 164.40000000000003,106.46666666666667 328.80000000000007,81.93333333333332 487,74 C 645.1999999999999,66.06666666666668 797.2,74.73333333333335 955,87 C 1112.8,99.26666666666665 1276.4,115.13333333333333 1440,131 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,131 C 200.13333333333333,170.46666666666667 400.26666666666665,209.93333333333334 558,189 C 715.7333333333333,168.06666666666666 831.0666666666666,86.73333333333332 971,67 C 1110.9333333333334,47.26666666666667 1275.4666666666667,89.13333333333334 1440,131 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,131 C 205.59999999999997,157.8 411.19999999999993,184.6 552,179 C 692.8000000000001,173.4 768.8,135.4 906,122 C 1043.2,108.6 1241.6,119.8 1440,131 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,131 C 144.53333333333336,98.33333333333333 289.0666666666667,65.66666666666666 429,82 C 568.9333333333333,98.33333333333334 704.2666666666667,163.66666666666669 872,180 C 1039.7333333333333,196.33333333333331 1239.8666666666668,163.66666666666666 1440,131 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,131 C 164.40000000000003,106.46666666666667 328.80000000000007,81.93333333333332 487,74 C 645.1999999999999,66.06666666666668 797.2,74.73333333333335 955,87 C 1112.8,99.26666666666665 1276.4,115.13333333333333 1440,131 L 1440,700 L 0,700 Z",
    ]
  );

  const path1 = interpolatePath(
    [0, 0.25, 0.5, 0.75, 1],
    [
      "M 0,700 L 0,306 C 205.46666666666664,324.4 410.9333333333333,342.8 563,333 C 715.0666666666667,323.2 813.7333333333333,285.2 951,276 C 1088.2666666666667,266.8 1264.1333333333332,286.4 1440,306 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,306 C 125.86666666666667,297.73333333333335 251.73333333333335,289.46666666666664 426,301 C 600.2666666666667,312.53333333333336 822.9333333333334,343.8666666666667 1000,348 C 1177.0666666666666,352.1333333333333 1308.5333333333333,329.06666666666666 1440,306 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,306 C 144.40000000000003,335.6 288.80000000000007,365.2 451,369 C 613.1999999999999,372.8 793.2,350.79999999999995 961,336 C 1128.8,321.20000000000005 1284.4,313.6 1440,306 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,306 C 162.93333333333334,337.73333333333335 325.8666666666667,369.46666666666664 476,362 C 626.1333333333333,354.53333333333336 763.4666666666667,307.8666666666667 922,292 C 1080.5333333333333,276.1333333333333 1260.2666666666667,291.06666666666666 1440,306 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,306 C 205.46666666666664,324.4 410.9333333333333,342.8 563,333 C 715.0666666666667,323.2 813.7333333333333,285.2 951,276 C 1088.2666666666667,266.8 1264.1333333333332,286.4 1440,306 L 1440,700 L 0,700 Z",
    ]
  );

  const path2 = interpolatePath(
    [0, 0.25, 0.5, 0.75, 1],
    [
      "M 0,700 L 0,481 C 190,511.4 380,541.8 548,522 C 716,502.2 862,432.2 1007,417 C 1152,401.8 1296,441.4 1440,481 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,481 C 200.8,454.8666666666667 401.6,428.7333333333333 551,424 C 700.4,419.2666666666667 798.4000000000001,435.93333333333334 938,449 C 1077.6,462.06666666666666 1258.8,471.5333333333333 1440,481 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,481 C 160.53333333333336,457.26666666666665 321.0666666666667,433.53333333333336 496,451 C 670.9333333333333,468.46666666666664 860.2666666666667,527.1333333333333 1020,539 C 1179.7333333333333,550.8666666666667 1309.8666666666668,515.9333333333334 1440,481 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,481 C 163.59999999999997,502.46666666666664 327.19999999999993,523.9333333333333 485,520 C 642.8000000000001,516.0666666666667 794.8,486.73333333333335 953,476 C 1111.2,465.26666666666665 1275.6,473.1333333333333 1440,481 L 1440,700 L 0,700 Z",
      "M 0,700 L 0,481 C 190,511.4 380,541.8 548,522 C 716,502.2 862,432.2 1007,417 C 1152,401.8 1296,441.4 1440,481 L 1440,700 L 0,700 Z",
    ]
  );

  return (
    <Svg
      width={screenWidth}
      height="300"
      viewBox="0 0 1440 700"
      xmlns="http://www.w3.org/2000/svg"
    >
      <Defs>
        <LinearGradient id="gradient" x1="0%" y1="50%" x2="100%" y2="50%">
          <Stop offset="5%" stopColor="#00926d" />
          <Stop offset="95%" stopColor="#00926d" />
        </LinearGradient>
      </Defs>
      <AnimatedPath
        d={path0}
        fill="url(#gradient)"
        fillOpacity="0.4"
        transform="rotate(180 720 350)"
      />
      <AnimatedPath
        d={path1}
        fill="url(#gradient)"
        fillOpacity="0.53"
        transform="rotate(180 720 350)"
      />
      <AnimatedPath
        d={path2}
        fill="#00926d"
        fillOpacity="1"
        transform="rotate(180 720 350)"
      />
    </Svg>
  );
};

export default WaveAnimation;
